# Mosquitto Configuration for Agriculture 4.0

# === NETWORK ===
listener 1883
protocol mqtt

# WebSocket listener (para frontend)
listener 9001
protocol websockets

# === SECURITY ===
# VULNERABILIDAD CONTROLADA: Autenticaci칩n deshabilitada (solo para testing)
# En producci칩n, habilitar: allow_anonymous false
allow_anonymous true

# Limitar tama침o de paquete (mitigaci칩n CVE-2023-0809)
max_packet_size 100000

# === PERSISTENCE ===
persistence true
persistence_location /mosquitto/data/

# === LOGGING ===
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# === QoS ===
max_queued_messages 1000
message_size_limit 100000